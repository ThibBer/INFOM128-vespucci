\subsection{Scénario d'évolution n°2}
\subsubsection{Scénario}
Supprimer la table \mintinline{java}{filters}.
\subsubsection{Modifications}
Tous les schémas sont concernés par cette modification, il faut donc y supprimer la table \mintinline{java}{filters}.

\begin{enumerate}
    \item \textbf{Modifier la méthode \mintinline{java}{onCreate}}
          \begin{itemize}
              \item \textbf{Fichier concerné} : \texttt{TagFilterDatabaseHelper.java}
              \item \textbf{Emplacement} :
                    \href{https://github.com/MarcusWolschon/osmeditor4android/blob/master/src/main/java/de/blau/android/filter/TagFilterDatabaseHelper.java#L30}{Ligne 30}
              \item \textbf{Ancien code} :
                    \begin{minted}{java}
                        @Override
                        public void onCreate(SQLiteDatabase db) {
                            try {
                                db.execSQL("CREATE TABLE filters (name TEXT)");
                                db.execSQL("INSERT INTO filters VALUES ('Default')");
                                db.execSQL(
                                        "CREATE TABLE filterentries (filter TEXT, include INTEGER DEFAULT 0, type TEXT DEFAULT '*', key TEXT DEFAULT '*', value TEXT DEFAULT '*', active INTEGER DEFAULT 0, FOREIGN KEY(filter) REFERENCES filters(name))");
                            } catch (SQLException e) {
                                Log.w(DEBUG_TAG, "Problem creating database", e);
                            }
                        }
                    \end{minted}
              \item \textbf{Nouveau code} :
                    \begin{minted}{java}
                        @Override
                        public void onCreate(SQLiteDatabase db) {
                            try {
                                db.execSQL("CREATE TABLE filters (name TEXT)");
                                db.execSQL("INSERT INTO filters VALUES ('Default')");
                                db.execSQL(
                                        "CREATE TABLE filterentries (filter TEXT, include INTEGER DEFAULT 0, type TEXT DEFAULT '*', key TEXT DEFAULT '*', value TEXT DEFAULT '*', active INTEGER DEFAULT 0, FOREIGN KEY(filter) REFERENCES filters(name))");
                            } catch (SQLException e) {
                                Log.w(DEBUG_TAG, "Problem creating database", e);
                            }
                        }
                    \end{minted}
          \end{itemize}
\end{enumerate}

\subsubsection{Scénario}
Renommer la colonne \mintinline{java}{name} de la table \mintinline{java}{headers}.
\subsubsection{Modifications}
Pour renommer la colonne \mintinline{java}{name} de la table \mintinline{java}{headers}, les étapes suivantes sont nécessaires. Ces changements concernent le code source et le schéma SQL dans différents fichiers du projet.

\begin{enumerate}
    \item \textbf{Changer la constante qui représente le nom de la colonne}
          \begin{itemize}
              \item \textbf{Fichier concerné} : \texttt{TileLayerDatabase.java}
              \item \textbf{Emplacement} :
                    \href{https://github.com/MarcusWolschon/osmeditor4android/blob/dcabe8084aa15f5551a37c990516bf73398af1bf/src/main/java/de/blau/android/resources/TileLayerDatabase.java#L82}{Ligne 82}
              \item \textbf{Ancien code} :
                    \begin{minted}{java}
                        private static final String HEADER_NAME_FIELD = "name";
                    \end{minted}
              \item \textbf{Nouveau code} :
                    \begin{minted}{java}
                        private static final String HEADER_NAME_FIELD = "newName";
                    \end{minted}
          \end{itemize}

    \item \textbf{Modifier la définition de la table dans la méthode \texttt{createHeadersTable}}
          \begin{itemize}
              \item \textbf{Fichier concerné} : \texttt{TileLayerDatabase.java}
              \item \textbf{Emplacement} :
                    \href{https://github.com/MarcusWolschon/osmeditor4android/blob/dcabe8084aa15f5551a37c990516bf73398af1bf/src/main/java/de/blau/android/resources/TileLayerDatabase.java#L161}{Ligne 161}
              \item \textbf{Ancien code} :
                    \begin{minted}{java}
                        private void createHeadersTable(SQLiteDatabase db) {
                            db.execSQL("CREATE TABLE headers (id TEXT NOT NULL, name TEXT NOT NULL, value TEXT NOT NULL,"
                                    + " FOREIGN KEY(id) REFERENCES layers(id) ON DELETE CASCADE)");
                            db.execSQL("CREATE INDEX headers_idx ON headers(id)");
                        }
                    \end{minted}
              \item \textbf{Nouveau code} :
                    \begin{minted}{java}
                        private void createHeadersTable(SQLiteDatabase db) {
                            db.execSQL("CREATE TABLE headers (id TEXT NOT NULL, newName TEXT NOT NULL, value TEXT NOT NULL,"
                                    + " FOREIGN KEY(id) REFERENCES layers(id) ON DELETE CASCADE)");
                            db.execSQL("CREATE INDEX headers_idx ON headers(id)");
                        }
                    \end{minted}
          \end{itemize}
\end{enumerate}